<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title id="page-title">ğŸ° ì˜¤ëŠ˜ì˜ ìš´ì„¸ - ìš´ì„¸í† ë¼</title>
    
    <!-- SEO & ì†Œì…œ ê³µìœ  ìµœì í™” -->
    <meta name="description" id="page-description" content="ìš´ì„¸í† ë¼ê°€ ì•Œë ¤ì£¼ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸! ìƒë…„ì›”ì¼ë§Œ ì…ë ¥í•˜ë©´ AIê°€ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤.">
    <meta property="og:title" content="ğŸ° ì˜¤ëŠ˜ì˜ ìš´ì„¸ - ìš´ì„¸í† ë¼">
    <meta property="og:description" content="ìš´ì„¸í† ë¼ê°€ ì•Œë ¤ì£¼ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸! ìƒë…„ì›”ì¼ë§Œ ì…ë ¥í•˜ë©´ AIê°€ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/FF69B4/FFFFFF?text=ğŸ°+í† ë¼ì ">
    <meta property="og:type" content="website">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', 'Noto Sans JP', 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* ì–¸ì–´ ì„ íƒ ë²„íŠ¼ */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .language-btn {
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .language-btn:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        .language-dropdown {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            min-width: 150px;
        }
        
        .language-dropdown.show {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .language-option:hover {
            background: #f5f5f5;
        }
        
        .language-option.active {
            background: #667eea;
            color: white;
        }
        
        /* ì¸íŠ¸ë¡œ í™”ë©´ */
        #intro-screen {
            text-align: center;
            padding-top: 20vh;
            animation: fadeIn 0.8s ease-in;
        }
        
        .logo {
            font-size: 100px;
            animation: bounce 2s infinite;
            margin-bottom: 20px;
        }
        
        h1 {
            color: white;
            font-size: 32px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 16px;
            margin-bottom: 50px;
        }
        
        /* ì…ë ¥ í™”ë©´ */
        #input-screen {
            display: none;
            animation: slideUp 0.5s ease-out;
        }
        
        .card {
            background: white;
            border-radius: 24px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            color: #333;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        input[type="date"],
        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* ë¡œë”© í™”ë©´ */
        #loading-screen {
            display: none;
            text-align: center;
            padding-top: 30vh;
        }
        
        .loading-rabbit {
            font-size: 80px;
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            color: white;
            font-size: 18px;
            margin-top: 20px;
        }
        
        /* ê²°ê³¼ í™”ë©´ */
        #result-screen {
            display: none;
            animation: fadeIn 0.8s ease-in;
        }
        
        .result-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .result-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .score {
            font-size: 48px;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .stars {
            font-size: 32px;
            letter-spacing: 5px;
        }
        
        .fortune-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .fortune-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
        }
        
        .fortune-item:hover {
            background: #f8f8f8;
            border-radius: 8px;
        }
        
        .fortune-item:last-child {
            border-bottom: none;
        }
        
        .fortune-icon {
            font-size: 32px;
            margin-right: 15px;
        }
        
        .fortune-content {
            flex: 1;
        }
        
        .fortune-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .fortune-value {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .fortune-arrow {
            font-size: 20px;
            color: #999;
            transition: transform 0.3s;
        }
        
        .fortune-item:hover .fortune-arrow {
            transform: translateX(5px);
        }
        
        /* ìƒì„¸ë³´ê¸° ëª¨ë‹¬ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
        
        .modal-content {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 24px 24px 0 0;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUpModal 0.3s;
            z-index: 1001;
        }
        
        @keyframes slideUpModal {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .modal-header {
            padding: 25px;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }
        
        .modal-close {
            float: right;
            font-size: 28px;
            color: #999;
            cursor: pointer;
            line-height: 1;
        }
        
        .modal-title {
            font-size: 22px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .detail-section {
            margin-bottom: 25px;
        }
        
        .detail-section h4 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 12px;
        }
        
        .detail-section p {
            color: #555;
            line-height: 1.7;
            font-size: 15px;
        }
        
        /* ì ê¸ˆëœ ì½˜í…ì¸  */
        .locked-content {
            position: relative;
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }
        
        .unlock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 10;
            filter: none;
        }
        
        .unlock-overlay h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .unlock-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .unlock-btn:hover {
            transform: scale(1.05);
        }
        
        .unlock-btn.watch-ad {
            background: #4CAF50;
            color: white;
        }
        
        .unlock-btn.cancel {
            background: #f0f0f0;
            color: #666;
        }
        
        /* ê´‘ê³  ì˜ì—­ */
        .ad-container {
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px dashed #e0e0e0;
        }
        
        .ad-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 10px;
        }
        
        .ad-placeholder {
            background: #f5f5f5;
            padding: 40px;
            border-radius: 12px;
            color: #666;
            font-size: 14px;
        }
        
        .advice-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .advice-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .advice-content {
            font-size: 16px;
            line-height: 1.6;
        }
        
        /* ê³µìœ  ë²„íŠ¼ */
        .share-section {
            margin-top: 30px;
        }
        
        .share-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .share-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
        }
        
        .share-kakao {
            background: #FEE500;
            color: #000;
        }
        
        .share-twitter {
            background: #1DA1F2;
            color: white;
        }
        
        .share-facebook {
            background: #1877F2;
            color: white;
        }
        
        .share-copy {
            background: #34C759;
            color: white;
        }
        
        .retry-btn {
            background: white;
            color: #667eea;
            margin-top: 15px;
        }
        
        .error-message {
            background: #fee;
            color: #c00;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .card {
                padding: 30px 20px;
            }
            
            .logo {
                font-size: 80px;
            }
            
            .modal-content {
                max-height: 85vh;
            }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- ì–¸ì–´ ì„ íƒ -->
    <div class="language-selector">
        <button class="language-btn" onclick="toggleLanguageDropdown()">
            <span id="current-language">ğŸŒ í•œêµ­ì–´</span>
        </button>
        <div class="language-dropdown" id="language-dropdown">
            <div class="language-option" data-lang="ko" onclick="changeLanguage('ko')">
                ğŸ‡°ğŸ‡· í•œêµ­ì–´
            </div>
            <div class="language-option" data-lang="en" onclick="changeLanguage('en')">
                ğŸ‡ºğŸ‡¸ English
            </div>
            <div class="language-option" data-lang="ja" onclick="changeLanguage('ja')">
                ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª
            </div>
            <div class="language-option" data-lang="zh" onclick="changeLanguage('zh')">
                ğŸ‡¨ğŸ‡³ ä¸­æ–‡
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- ì¸íŠ¸ë¡œ í™”ë©´ -->
        <div id="intro-screen">
            <div class="logo">ğŸ°</div>
            <h1 data-i18n="title">ì˜¤ëŠ˜ì˜ ìš´ì„¸</h1>
            <p class="subtitle" data-i18n="subtitle">í† ë¼ê°€ ì•Œë ¤ì£¼ëŠ” ë‹¹ì‹ ì˜ í•˜ë£¨</p>
            <button class="btn" onclick="showInputScreen()" data-i18n="start">ì‹œì‘í•˜ê¸°</button>
        </div>
        
        <!-- ì…ë ¥ í™”ë©´ -->
        <div id="input-screen">
            <div class="card">
                <h2 style="margin-bottom: 30px; text-align: center; color: #333;" data-i18n="inputTitle">ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”</h2>
                
                <div id="error-container"></div>
                
                <div class="input-group">
                    <label data-i18n="nicknameLabel">ë‹‰ë„¤ì„ (ì„ íƒ)</label>
                    <input type="text" id="nickname" data-i18n-placeholder="nicknamePlaceholder" placeholder="ì˜ˆ: í–‰ìš´ì´" maxlength="10">
                </div>
                
                <div class="input-group">
                    <label data-i18n="birthdateLabel">ìƒë…„ì›”ì¼ *</label>
                    <input type="date" id="birthdate" required>
                </div>
                
                <button class="btn" id="submit-btn" onclick="getFortune()" data-i18n="submit">ìš´ì„¸ ë³´ê¸°</button>
            </div>
            
            <!-- ê´‘ê³  ì˜ì—­ 1 -->
            <div class="ad-container">
                <div class="ad-label" data-i18n="ad">ê´‘ê³ </div>
                <div class="ad-placeholder">
                    Google AdSense
                    <br>(320x100)
                </div>
            </div>
        </div>
        
        <!-- ë¡œë”© í™”ë©´ -->
        <div id="loading-screen">
            <div class="loading-rabbit">ğŸ°</div>
            <div class="loading-text" data-i18n="loading">í† ë¼ê°€ ìš´ì„¸ë¥¼ í™•ì¸í•˜ê³  ìˆì–´ìš”...</div>
        </div>
        
        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-screen">
            <div class="result-header">
                <h2 id="result-name">ë‹¹ì‹ ì˜ ì˜¤ëŠ˜ ìš´ì„¸</h2>
                <div class="score" id="total-score">88ì </div>
                <div class="stars" id="star-rating">â­â­â­â­</div>
                <p style="font-size: 14px; margin-top: 10px; opacity: 0.9;"><span data-i18n="topRank">ìƒìœ„</span> <span id="rank-percent">12</span>%</p>
            </div>
            
            <!-- ì¢…í•© ìš´ì„¸ -->
            <div class="fortune-card">
                <div class="fortune-item" onclick="showFortuneDetail('love')">
                    <div class="fortune-icon">ğŸ’</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="loveFortune">ì—°ì• ìš´</div>
                        <div class="fortune-value" id="love-fortune">ìµœìƒ</div>
                    </div>
                    <div class="fortune-arrow">â†’</div>
                </div>
                
                <div class="fortune-item" onclick="showFortuneDetail('money')">
                    <div class="fortune-icon">ğŸ’°</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="moneyFortune">ì¬ë¬¼ìš´</div>
                        <div class="fortune-value" id="money-fortune">ìƒ</div>
                    </div>
                    <div class="fortune-arrow">â†’</div>
                </div>
                
                <div class="fortune-item" onclick="showFortuneDetail('health')">
                    <div class="fortune-icon">ğŸ¥</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="healthFortune">ê±´ê°•ìš´</div>
                        <div class="fortune-value" id="health-fortune">ì¤‘ìƒ</div>
                    </div>
                    <div class="fortune-arrow">â†’</div>
                </div>
                
                <div class="fortune-item" onclick="showFortuneDetail('work')">
                    <div class="fortune-icon">ğŸ“š</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="workFortune">í•™ì—…/ì—…ë¬´ìš´</div>
                        <div class="fortune-value" id="work-fortune">ì¤‘</div>
                    </div>
                    <div class="fortune-arrow">â†’</div>
                </div>
            </div>
            
            <!-- ê´‘ê³  ì˜ì—­ 2 -->
            <div class="ad-container">
                <div class="ad-label" data-i18n="ad">ê´‘ê³ </div>
                <div class="ad-placeholder">
                    Google AdSense
                    <br>(Native)
                </div>
            </div>
            
            <!-- í–‰ìš´ì˜ ì•„ì´í…œ -->
            <div class="fortune-card">
                <h3 style="margin-bottom: 20px; color: #333;" data-i18n="luckyItems">ğŸ€ ì˜¤ëŠ˜ì˜ í–‰ìš´ ì•„ì´í…œ</h3>
                <div class="fortune-item" style="cursor: default;">
                    <div class="fortune-icon">ğŸ¨</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="luckyColor">í–‰ìš´ì˜ ìƒ‰</div>
                        <div class="fortune-value" id="lucky-color">íŒŒë€ìƒ‰</div>
                    </div>
                </div>
                
                <div class="fortune-item" style="cursor: default;">
                    <div class="fortune-icon">ğŸ”¢</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="luckyNumber">í–‰ìš´ì˜ ìˆ«ì</div>
                        <div class="fortune-value" id="lucky-number">7</div>
                    </div>
                </div>
                
                <div class="fortune-item" style="cursor: default;">
                    <div class="fortune-icon">â°</div>
                    <div class="fortune-content">
                        <div class="fortune-label" data-i18n="luckyTime">í–‰ìš´ì˜ ì‹œê°„</div>
                        <div class="fortune-value" id="lucky-time">ì˜¤í›„ 3-5ì‹œ</div>
                    </div>
                </div>
            </div>
            
            <!-- ì˜¤ëŠ˜ì˜ ì¡°ì–¸ -->
            <div class="advice-card">
                <div class="advice-title" data-i18n="adviceTitle">ğŸ¯ ì˜¤ëŠ˜ì˜ ì¡°ì–¸</div>
                <div class="advice-content" id="advice-text">
                    ì˜¤ëŠ˜ì€ ìƒˆë¡œìš´ ì‹œì‘ì— ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤. ì˜¤í›„ì— ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”.
                </div>
            </div>
            
            <!-- ê³µìœ  ì„¹ì…˜ -->
            <div class="share-section">
                <div class="card" style="padding: 25px;">
                    <h3 style="margin-bottom: 15px; color: #333; text-align: center;" data-i18n="shareTitle">ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸°</h3>
                    <div class="share-buttons">
                        <button class="share-btn share-kakao" onclick="shareKakao()">
                            ğŸ’¬ <span data-i18n="kakao">ì¹´ì¹´ì˜¤í†¡</span>
                        </button>
                        <button class="share-btn share-twitter" onclick="shareTwitter()">
                            ğŸ¦ <span data-i18n="twitter">íŠ¸ìœ„í„°</span>
                        </button>
                        <button class="share-btn share-facebook" onclick="shareFacebook()">
                            ğŸ‘ <span data-i18n="facebook">í˜ì´ìŠ¤ë¶</span>
                        </button>
                        <button class="share-btn share-copy" onclick="copyLink()">
                            ğŸ”— <span data-i18n="copyLink">ë§í¬ ë³µì‚¬</span>
                        </button>
                    </div>
                    <button class="btn retry-btn" onclick="resetApp()" data-i18n="retry">ë‹¤ì‹œ ë³´ê¸°</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ìš´ì„¸ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal()"></div>
    <div class="modal-content" id="modal-content">
        <div class="modal-header">
            <span class="modal-close" onclick="closeModal()">Ã—</span>
            <div class="modal-title" id="modal-title">
                ğŸ’ ì—°ì• ìš´ ìƒì„¸
            </div>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
    </div>
    
    <script>
        // ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„°
        const translations = {
            ko: {
                title: 'ì˜¤ëŠ˜ì˜ ìš´ì„¸',
                subtitle: 'ìš´ì„¸í† ë¼ê°€ ì•Œë ¤ì£¼ëŠ” ë‹¹ì‹ ì˜ í•˜ë£¨',
                start: 'ì‹œì‘í•˜ê¸°',
                inputTitle: 'ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”',
                nicknameLabel: 'ë‹‰ë„¤ì„ (ì„ íƒ)',
                nicknamePlaceholder: 'ì˜ˆ: í–‰ìš´ì´',
                birthdateLabel: 'ìƒë…„ì›”ì¼ *',
                submit: 'ìš´ì„¸ ë³´ê¸°',
                ad: 'ê´‘ê³ ',
                loading: 'ìš´ì„¸í† ë¼ê°€ ìš´ì„¸ë¥¼ í™•ì¸í•˜ê³  ìˆì–´ìš”...',
                topRank: 'ìƒìœ„',
                loveFortune: 'ì—°ì• ìš´',
                moneyFortune: 'ì¬ë¬¼ìš´',
                healthFortune: 'ê±´ê°•ìš´',
                workFortune: 'í•™ì—…/ì—…ë¬´ìš´',
                luckyItems: 'ğŸ€ ì˜¤ëŠ˜ì˜ í–‰ìš´ ì•„ì´í…œ',
                luckyColor: 'í–‰ìš´ì˜ ìƒ‰',
                luckyNumber: 'í–‰ìš´ì˜ ìˆ«ì',
                luckyTime: 'í–‰ìš´ì˜ ì‹œê°„',
                adviceTitle: 'ğŸ¯ ì˜¤ëŠ˜ì˜ ì¡°ì–¸',
                shareTitle: 'ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸°',
                kakao: 'ì¹´ì¹´ì˜¤í†¡',
                twitter: 'íŠ¸ìœ„í„°',
                facebook: 'í˜ì´ìŠ¤ë¶',
                copyLink: 'ë§í¬ ë³µì‚¬',
                retry: 'ë‹¤ì‹œ ë³´ê¸°',
                detailTitle: 'ìƒì„¸',
                summary: 'ìš”ì•½',
                mainFortune: 'ì˜¤ëŠ˜ì˜ ìš´ì„¸',
                tips: 'ì¶”ì²œ í–‰ë™',
                lockedTitle: 'ğŸ”’ ë” ìì„¸í•œ ìš´ì„¸',
                lockedDesc: 'ê´‘ê³ ë¥¼ ì‹œì²­í•˜ê³  í™•ì¸í•˜ì„¸ìš”!',
                watchAd: 'ğŸ“º ê´‘ê³  ë³´ê³  ë¬´ë£Œë¡œ ë³´ê¸°',
                cancel: 'ì·¨ì†Œ',
                yourFortune: 'ë‹˜ì˜ ì˜¤ëŠ˜ ìš´ì„¸'
            },
            en: {
                title: "Today's Fortune",
                subtitle: 'Your daily fortune by Fortune Rabbit',
                start: 'Start',
                inputTitle: 'Enter your birth date',
                nicknameLabel: 'Nickname (optional)',
                nicknamePlaceholder: 'e.g. Lucky',
                birthdateLabel: 'Birth Date *',
                submit: 'Get Fortune',
                ad: 'Ad',
                loading: 'Fortune Rabbit is checking your fortune...',
                topRank: 'Top',
                loveFortune: 'Love',
                moneyFortune: 'Money',
                healthFortune: 'Health',
                workFortune: 'Work/Study',
                luckyItems: 'ğŸ€ Lucky Items',
                luckyColor: 'Lucky Color',
                luckyNumber: 'Lucky Number',
                luckyTime: 'Lucky Time',
                adviceTitle: 'ğŸ¯ Daily Advice',
                shareTitle: 'Share with Friends',
                kakao: 'KakaoTalk',
                twitter: 'Twitter',
                facebook: 'Facebook',
                copyLink: 'Copy Link',
                retry: 'Try Again',
                detailTitle: 'Detail',
                summary: 'Summary',
                mainFortune: "Today's Fortune",
                tips: 'Tips',
                lockedTitle: 'ğŸ”’ Detailed Fortune',
                lockedDesc: 'Watch an ad to unlock!',
                watchAd: 'ğŸ“º Watch Ad to Unlock',
                cancel: 'Cancel',
                yourFortune: "'s Fortune Today"
            },
            ja: {
                title: 'ä»Šæ—¥ã®é‹å‹¢',
                subtitle: 'é‹å‹¢ã†ã•ããŒæ•™ãˆã‚‹ã‚ãªãŸã®ä¸€æ—¥',
                start: 'ã‚¹ã‚¿ãƒ¼ãƒˆ',
                inputTitle: 'ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                nicknameLabel: 'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰',
                nicknamePlaceholder: 'ä¾‹ï¼šãƒ©ãƒƒã‚­ãƒ¼',
                birthdateLabel: 'ç”Ÿå¹´æœˆæ—¥ *',
                submit: 'é‹å‹¢ã‚’è¦‹ã‚‹',
                ad: 'åºƒå‘Š',
                loading: 'é‹å‹¢ã†ã•ããŒé‹å‹¢ã‚’ç¢ºèªã—ã¦ã„ã¾ã™...',
                topRank: 'ä¸Šä½',
                loveFortune: 'æ‹æ„›é‹',
                moneyFortune: 'é‡‘é‹',
                healthFortune: 'å¥åº·é‹',
                workFortune: 'ä»•äº‹é‹',
                luckyItems: 'ğŸ€ ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ',
                luckyColor: 'ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼',
                luckyNumber: 'ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼',
                luckyTime: 'ãƒ©ãƒƒã‚­ãƒ¼ã‚¿ã‚¤ãƒ ',
                adviceTitle: 'ğŸ¯ ä»Šæ—¥ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹',
                shareTitle: 'å‹é”ã«ã‚·ã‚§ã‚¢',
                kakao: 'ã‚«ã‚«ã‚ªãƒˆãƒ¼ã‚¯',
                twitter: 'ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼',
                facebook: 'ãƒ•ã‚§ã‚¤ã‚¹ãƒ–ãƒƒã‚¯',
                copyLink: 'ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼',
                retry: 'ã‚‚ã†ä¸€åº¦',
                detailTitle: 'è©³ç´°',
                summary: 'æ¦‚è¦',
                mainFortune: 'ä»Šæ—¥ã®é‹å‹¢',
                tips: 'ãŠã™ã™ã‚ã®è¡Œå‹•',
                lockedTitle: 'ğŸ”’ è©³ã—ã„é‹å‹¢',
                lockedDesc: 'åºƒå‘Šã‚’è¦‹ã¦ç¢ºèªã—ã¦ãã ã•ã„ï¼',
                watchAd: 'ğŸ“º åºƒå‘Šã‚’è¦‹ã¦ç„¡æ–™ã§è¦‹ã‚‹',
                cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
                yourFortune: 'ã•ã‚“ã®ä»Šæ—¥ã®é‹å‹¢'
            },
            zh: {
                title: 'ä»Šæ—¥è¿åŠ¿',
                subtitle: 'è¿åŠ¿å…”å‘Šè¯‰ä½ çš„ä¸€å¤©',
                start: 'å¼€å§‹',
                inputTitle: 'è¯·è¾“å…¥å‡ºç”Ÿæ—¥æœŸ',
                nicknameLabel: 'æ˜µç§°ï¼ˆå¯é€‰ï¼‰',
                nicknamePlaceholder: 'ä¾‹å¦‚ï¼šå¹¸è¿',
                birthdateLabel: 'å‡ºç”Ÿæ—¥æœŸ *',
                submit: 'æŸ¥çœ‹è¿åŠ¿',
                ad: 'å¹¿å‘Š',
                loading: 'è¿åŠ¿å…”æ­£åœ¨æŸ¥çœ‹ä½ çš„è¿åŠ¿...',
                topRank: 'å‰',
                loveFortune: 'çˆ±æƒ…è¿',
                moneyFortune: 'è´¢è¿',
                healthFortune: 'å¥åº·è¿',
                workFortune: 'å·¥ä½œ/å­¦ä¸šè¿',
                luckyItems: 'ğŸ€ ä»Šæ—¥å¹¸è¿ç‰©',
                luckyColor: 'å¹¸è¿é¢œè‰²',
                luckyNumber: 'å¹¸è¿æ•°å­—',
                luckyTime: 'å¹¸è¿æ—¶é—´',
                adviceTitle: 'ğŸ¯ ä»Šæ—¥å»ºè®®',
                shareTitle: 'åˆ†äº«ç»™æœ‹å‹',
                kakao: 'KakaoTalk',
                twitter: 'Twitter',
                facebook: 'Facebook',
                copyLink: 'å¤åˆ¶é“¾æ¥',
                retry: 'é‡æ–°æŸ¥çœ‹',
                detailTitle: 'è¯¦æƒ…',
                summary: 'æ‘˜è¦',
                mainFortune: 'ä»Šæ—¥è¿åŠ¿',
                tips: 'æ¨èè¡ŒåŠ¨',
                lockedTitle: 'ğŸ”’ æ›´è¯¦ç»†çš„è¿åŠ¿',
                lockedDesc: 'è§‚çœ‹å¹¿å‘ŠåæŸ¥çœ‹ï¼',
                watchAd: 'ğŸ“º è§‚çœ‹å¹¿å‘Šå…è´¹æŸ¥çœ‹',
                cancel: 'å–æ¶ˆ',
                yourFortune: 'çš„ä»Šæ—¥è¿åŠ¿'
            }
        };
        
        let currentLang = 'ko';
        let fortuneData = null;
        let unlockedDetails = new Set();
        
        // ì§€ì—­ë³„ ì–¸ì–´ ìë™ ê°ì§€
        function detectLanguage() {
            const userLang = navigator.language || navigator.userLanguage;
            const langCode = userLang.toLowerCase();
            
            if (langCode.startsWith('ko')) return 'ko';
            if (langCode.startsWith('ja')) return 'ja';
            if (langCode.startsWith('zh')) return 'zh';
            return 'en'; // ê¸°ë³¸ê°’
        }
        
        // ì–¸ì–´ ë³€ê²½
        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('preferredLanguage', lang);
            
            // UI ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // placeholder ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
            
            // ì–¸ì–´ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            const langNames = {
                ko: 'ğŸŒ í•œêµ­ì–´',
                en: 'ğŸŒ English',
                ja: 'ğŸŒ æ—¥æœ¬èª',
                zh: 'ğŸŒ ä¸­æ–‡'
            };
            document.getElementById('current-language').textContent = langNames[lang];
            
            // í˜ì´ì§€ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
            document.getElementById('page-title').textContent = `ğŸ° ${translations[lang].title}`;
            document.getElementById('page-description').content = translations[lang].subtitle;
            
            // í™œì„± ì–¸ì–´ í‘œì‹œ
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('active');
                if (option.getAttribute('data-lang') === lang) {
                    option.classList.add('active');
                }
            });
            
            // ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
            document.getElementById('language-dropdown').classList.remove('show');
        }
        
        // ì–¸ì–´ ë“œë¡­ë‹¤ìš´ í† ê¸€
        function toggleLanguageDropdown() {
            document.getElementById('language-dropdown').classList.toggle('show');
        }
        
        // ìƒì„¸ ìš´ì„¸ ë°ì´í„° (Mock - ì‹¤ì œë¡œëŠ” APIì—ì„œ)
        const fortuneDetails = {
            love: {
                icon: 'ğŸ’',
                summary: {
                    ko: 'ì˜¤ëŠ˜ì˜ ì—°ì• ìš´ì€ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤!',
                    en: 'Your love fortune today is excellent!',
                    ja: 'ä»Šæ—¥ã®æ‹æ„›é‹ã¯ã¨ã¦ã‚‚è‰¯ã„ã§ã™ï¼',
                    zh: 'ä»Šå¤©çš„çˆ±æƒ…è¿éå¸¸å¥½ï¼'
                },
                detail: {
                    ko: 'ì˜¤ëŠ˜ì€ ìƒˆë¡œìš´ ë§Œë‚¨ì˜ ê¸°íšŒê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‰ì†Œì™€ ë‹¤ë¥¸ ì¥ì†Œì— ê°€ë³´ì„¸ìš”. ê¸°ì¡´ ê´€ê³„ê°€ ìˆë‹¤ë©´ í•œ ë‹¨ê³„ ë°œì „í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì†”ì§í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”. ì €ë…ì—ëŠ” ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°ê°€ ì¡°ì„±ë©ë‹ˆë‹¤.',
                    en: 'Today you may have opportunities for new encounters. Try going to different places. If you have an existing relationship, it may develop to the next level. Have honest conversations. The evening will be romantic.',
                    ja: 'ä»Šæ—¥ã¯æ–°ã—ã„å‡ºä¼šã„ã®ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã„ã¤ã‚‚ã¨é•ã†å ´æ‰€ã«è¡Œã£ã¦ã¿ã¦ãã ã•ã„ã€‚æ—¢å­˜ã®é–¢ä¿‚ãŒã‚ã‚Œã°ã€ä¸€æ®µéšç™ºå±•ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚æ­£ç›´ãªå¯¾è©±ã‚’äº¤ã‚ã—ã¦ã¿ã¦ãã ã•ã„ã€‚å¤œã«ã¯ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªé›°å›²æ°—ãŒä½œã‚‰ã‚Œã¾ã™ã€‚',
                    zh: 'ä»Šå¤©å¯èƒ½ä¼šæœ‰æ–°çš„ç›¸é‡æœºä¼šã€‚è¯•ç€å»ä¸åŒçš„åœ°æ–¹ã€‚å¦‚æœæœ‰ç°æœ‰çš„å…³ç³»ï¼Œå¾ˆå¯èƒ½ä¼šè¿›ä¸€æ­¥å‘å±•ã€‚è¿›è¡Œå¦è¯šçš„å¯¹è¯ã€‚æ™šä¸Šä¼šæœ‰æµªæ¼«çš„æ°›å›´ã€‚'
                },
                tips: {
                    ko: 'ë°ì€ ìƒ‰ìƒì˜ ì˜·ì„ ì…ê³ , í–¥ìˆ˜ë¥¼ ë¿Œë¦¬ë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤. ë¨¼ì € ì—°ë½ì„ ì‹œë„í•˜ëŠ” ê²ƒë„ ì¢‹ì•„ìš”.',
                    en: 'Wear bright colors and perfume. Taking the initiative to contact first is also good.',
                    ja: 'æ˜ã‚‹ã„è‰²ã®æœã‚’ç€ã¦ã€é¦™æ°´ã‚’ã¤ã‘ã‚‹ã¨ã•ã‚‰ã«è‰¯ã„ã§ã™ã€‚å…ˆã«é€£çµ¡ã‚’è©¦ã¿ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚',
                    zh: 'ç©¿æ˜äº®é¢œè‰²çš„è¡£æœï¼Œå–·é¦™æ°´ä¼šæ›´å¥½ã€‚ä¸»åŠ¨è”ç³»ä¹Ÿå¾ˆå¥½ã€‚'
                }
            },
            money: {
                icon: 'ğŸ’°',
                summary: {
                    ko: 'ì˜¤ëŠ˜ì€ ì‘ì€ íš¡ì¬ìˆ˜ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    en: 'You may have a small windfall today.',
                    ja: 'ä»Šæ—¥ã¯å°ã•ãªè‡¨æ™‚åå…¥ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
                    zh: 'ä»Šå¤©å¯èƒ½ä¼šæœ‰å°å°çš„æ„å¤–ä¹‹è´¢ã€‚'
                },
                detail: {
                    ko: 'ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ì…ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ì€ ê¸°íšŒë„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”. ì˜¤í›„ì—ëŠ” íˆ¬ìë‚˜ ì¬ì • ê²°ì •ì„ ë‚´ë¦¬ê¸° ì¢‹ì€ ì‹œê°„ì…ë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ íŒë‹¨í•˜ì„¸ìš”. ì €ë…ì—ëŠ” ì ˆì•½ ëª¨ë“œë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.',
                    en: 'You may have unexpected income. Don\'t miss even small opportunities. Afternoon is good for investment or financial decisions. Be careful. Keep saving mode in the evening.',
                    ja: 'äºˆæƒ³å¤–ã®åå…¥ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å°ã•ãªãƒãƒ£ãƒ³ã‚¹ã‚‚é€ƒã•ãªã„ã§ãã ã•ã„ã€‚åˆå¾Œã¯æŠ•è³‡ã‚„è²¡æ”¿çš„ãªæ±ºå®šã‚’ã™ã‚‹ã®ã«è‰¯ã„æ™‚é–“ã§ã™ã€‚æ…é‡ã«åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚å¤œã¯ç¯€ç´„ãƒ¢ãƒ¼ãƒ‰ã‚’ç¶­æŒã™ã‚‹ã®ãŒè‰¯ã„ã§ã™ã€‚',
                    zh: 'å¯èƒ½ä¼šæœ‰æ„å¤–çš„æ”¶å…¥ã€‚ä¸è¦é”™è¿‡å°æœºä¼šã€‚ä¸‹åˆæ˜¯åšæŠ•èµ„æˆ–è´¢åŠ¡å†³å®šçš„å¥½æ—¶æœºã€‚è¦è°¨æ…åˆ¤æ–­ã€‚æ™šä¸Šä¿æŒèŠ‚çº¦æ¨¡å¼æ¯”è¾ƒå¥½ã€‚'
                },
                tips: {
                    ko: 'ë³µê¶Œì„ ì‚¬ê±°ë‚˜ ì ê¸ˆì„ ë“¤ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤. í–‰ìš´ì˜ ìˆ«ìë¥¼ í™œìš©í•´ë³´ì„¸ìš”.',
                    en: 'Good day to buy lottery or start savings. Use your lucky numbers.',
                    ja: 'å®ãã˜ã‚’è²·ã£ãŸã‚Šã€è²¯é‡‘ã‚’å§‹ã‚ã‚‹ã®ã«è‰¯ã„æ—¥ã§ã™ã€‚ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã‚’æ´»ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚',
                    zh: 'é€‚åˆä¹°å½©ç¥¨æˆ–å¼€å§‹å‚¨è“„çš„æ—¥å­ã€‚åˆ©ç”¨å¹¸è¿æ•°å­—ã€‚'
                }
            },
            health: {
                icon: 'ğŸ¥',
                summary: {
                    ko: 'ì „ë°˜ì ìœ¼ë¡œ ì»¨ë””ì…˜ì´ ì–‘í˜¸í•©ë‹ˆë‹¤.',
                    en: 'Overall condition is good.',
                    ja: 'å…¨ä½“çš„ã«ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã¯è‰¯å¥½ã§ã™ã€‚',
                    zh: 'æ•´ä½“çŠ¶å†µè‰¯å¥½ã€‚'
                },
                detail: {
                    ko: 'ì•„ì¹¨ ìš´ë™ì´ë‚˜ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•˜ë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤. ì˜¤í›„ì—ëŠ” ì ê¹ì˜ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”. ì €ë…ì—ëŠ” ê°€ë²¼ìš´ ì‚°ì±…ì´ ê±´ê°•ì— ë„ì›€ì´ ë©ë‹ˆë‹¤. ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ì„¸ìš”.',
                    en: 'Starting the day with morning exercise or stretching is even better. Take a short break in the afternoon. Don\'t overdo it. Light walks in the evening help your health. Get enough sleep.',
                    ja: 'æœã®é‹å‹•ã‚„ã‚¹ãƒˆãƒ¬ãƒƒãƒã§ä¸€æ—¥ã‚’å§‹ã‚ã‚‹ã¨ã•ã‚‰ã«è‰¯ã„ã§ã™ã€‚åˆå¾Œã¯å°‘ã—ã®ä¼‘æ†©ãŒå¿…è¦ã§ã™ã€‚ç„¡ç†ã‚’ã—ãªã„ã§ãã ã•ã„ã€‚å¤œã¯è»½ã„æ•£æ­©ãŒå¥åº·ã«å½¹ç«‹ã¡ã¾ã™ã€‚ååˆ†ãªç¡çœ ã‚’å–ã£ã¦ãã ã•ã„ã€‚',
                    zh: 'ä»¥æ—©æ™¨è¿åŠ¨æˆ–æ‹‰ä¼¸å¼€å§‹ä¸€å¤©ä¼šæ›´å¥½ã€‚ä¸‹åˆéœ€è¦çŸ­æš‚çš„ä¼‘æ¯ã€‚ä¸è¦è¿‡åº¦ã€‚æ™šä¸Šè½»æ¾çš„æ•£æ­¥å¯¹å¥åº·æœ‰å¸®åŠ©ã€‚å……è¶³çš„ç¡çœ ã€‚'
                },
                tips: {
                    ko: 'ë¬¼ì„ ìì£¼ ë§ˆì‹œê³ , ê³¼ì‹ì€ í”¼í•˜ì„¸ìš”. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.',
                    en: 'Drink water frequently and avoid overeating. Stress management is important.',
                    ja: 'æ°´ã‚’ã‚ˆãé£²ã¿ã€éé£Ÿã¯é¿ã‘ã¦ãã ã•ã„ã€‚ã‚¹ãƒˆãƒ¬ã‚¹ç®¡ç†ãŒé‡è¦ã§ã™ã€‚',
                    zh: 'ç»å¸¸å–æ°´ï¼Œé¿å…æš´é¥®æš´é£Ÿã€‚å‹åŠ›ç®¡ç†å¾ˆé‡è¦ã€‚'
                }
            },
            work: {
                icon: 'ğŸ“š',
                summary: {
                    ko: 'ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì§€ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.',
                    en: 'A day of increased concentration.',
                    ja: 'é›†ä¸­åŠ›ãŒé«˜ã¾ã‚‹ä¸€æ—¥ã§ã™ã€‚',
                    zh: 'æ³¨æ„åŠ›æé«˜çš„ä¸€å¤©ã€‚'
                },
                detail: {
                    ko: 'ì˜¤ì „ì—ëŠ” ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”ëª¨ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”. ì˜¤í›„ì—ëŠ” ì¤‘ìš”í•œ íšŒì˜ë‚˜ ë°œí‘œê°€ ì˜ í’€ë¦´ ê²ƒì…ë‹ˆë‹¤. ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”. ì €ë…ì—ëŠ” í•™ìŠµì´ë‚˜ ìê¸°ê³„ë°œì— ì§‘ì¤‘í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.',
                    en: 'Creative ideas may come in the morning. Prepare to take notes. Important meetings or presentations will go well in the afternoon. Be confident. Evening is good for learning or self-development.',
                    ja: 'åˆå‰ä¸­ã¯å‰µé€ çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ãŒæµ®ã‹ã¶ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãƒ¡ãƒ¢ã‚’æº–å‚™ã—ã¦ãã ã•ã„ã€‚åˆå¾Œã¯é‡è¦ãªä¼šè­°ã‚„ãƒ—ãƒ¬ã‚¼ãƒ³ãŒã†ã¾ãã„ãã§ã—ã‚‡ã†ã€‚è‡ªä¿¡ã‚’æŒã£ã¦ãã ã•ã„ã€‚å¤œã¯å­¦ç¿’ã‚„è‡ªå·±å•“ç™ºã«é›†ä¸­ã™ã‚‹ã®ã«è‰¯ã„ã§ã™ã€‚',
                    zh: 'ä¸Šåˆå¯èƒ½ä¼šæœ‰åˆ›é€ æ€§çš„æƒ³æ³•ã€‚å‡†å¤‡å¥½åšç¬”è®°ã€‚ä¸‹åˆé‡è¦çš„ä¼šè®®æˆ–æ¼”è®²ä¼šè¿›å±•é¡ºåˆ©ã€‚è¦æœ‰ä¿¡å¿ƒã€‚æ™šä¸Šé€‚åˆå­¦ä¹ æˆ–è‡ªæˆ‘æå‡ã€‚'
                },
                tips: {
                    ko: 'ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ê³  í•˜ë‚˜ì”© ì²˜ë¦¬í•˜ì„¸ìš”. ë™ë£Œì™€ì˜ í˜‘ì—…ë„ ì›í™œí•  ê²ƒì…ë‹ˆë‹¤.',
                    en: 'Set priorities and handle them one by one. Collaboration with colleagues will be smooth.',
                    ja: 'å„ªå…ˆé †ä½ã‚’æ±ºã‚ã¦ä¸€ã¤ãšã¤å‡¦ç†ã—ã¦ãã ã•ã„ã€‚åŒåƒšã¨ã®å”æ¥­ã‚‚å††æ»‘ã§ã—ã‚‡ã†ã€‚',
                    zh: 'ç¡®å®šä¼˜å…ˆé¡ºåºï¼Œé€ä¸ªå¤„ç†ã€‚ä¸åŒäº‹çš„åˆä½œä¹Ÿä¼šå¾ˆé¡ºåˆ©ã€‚'
                }
            }
        };
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ì €ì¥ëœ ì–¸ì–´ ë˜ëŠ” ìë™ ê°ì§€
            const savedLang = localStorage.getItem('preferredLanguage');
            const detectedLang = savedLang || detectLanguage();
            changeLanguage(detectedLang);
            
            // ë‚ ì§œ ìµœëŒ€ê°’ ì„¤ì •
            const today = new Date();
            const maxDate = today.toISOString().split('T')[0];
            document.getElementById('birthdate').setAttribute('max', maxDate);
            
            // ì™¸ë¶€ í´ë¦­ì‹œ ì–¸ì–´ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('language-dropdown').classList.remove('show');
                }
            });
        });
        
        // í™”ë©´ ì „í™˜
        function showInputScreen() {
            document.getElementById('intro-screen').classList.add('hidden');
            document.getElementById('input-screen').style.display = 'block';
        }
        
        function showLoadingScreen() {
            document.getElementById('input-screen').style.display = 'none';
            document.getElementById('loading-screen').style.display = 'block';
        }
        
        function showResultScreen() {
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
        }
        
        function resetApp() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('input-screen').style.display = 'block';
            document.getElementById('nickname').value = '';
            document.getElementById('birthdate').value = '';
            document.getElementById('error-container').innerHTML = '';
            unlockedDetails.clear();
        }
        
        function showError(message) {
            const errorContainer = document.getElementById('error-container');
            errorContainer.innerHTML = `<div class="error-message">${message}</div>`;
            setTimeout(() => {
                errorContainer.innerHTML = '';
            }, 5000);
        }
        
        // ìš´ì„¸ ì¡°íšŒ
        async function getFortune() {
            const birthdate = document.getElementById('birthdate').value;
            const nickname = document.getElementById('nickname').value || translations[currentLang].yourFortune.replace('ì˜ today', '').replace("'s Fortune Today", 'You').replace('ã•ã‚“ã®ä»Šæ—¥ã®é‹å‹¢', 'ã‚ãªãŸ').replace('çš„ä»Šæ—¥è¿åŠ¿', 'ä½ ');
            
            if (!birthdate) {
                showError(translations[currentLang].birthdateLabel + '!');
                return;
            }
            
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = true;
            showLoadingScreen();
            
            try {
                // Mock ë°ì´í„° (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
                await new Promise(resolve => setTimeout(resolve, 2000));
                fortuneData = generateMockFortune(birthdate, nickname);
                displayFortune(fortuneData);
                showResultScreen();
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('input-screen').style.display = 'block';
                showError('Error loading fortune. Please try again.');
            } finally {
                submitBtn.disabled = false;
            }
        }
        
        // Mock ìš´ì„¸ ìƒì„±
        function generateMockFortune(birthdate, nickname) {
            const score = Math.floor(Math.random() * 30) + 70;
            const stars = Math.floor(score / 20);
            
            const fortunes = {
                ko: ['ìµœìƒ', 'ìƒ', 'ì¤‘ìƒ', 'ì¤‘', 'ì¤‘í•˜'],
                en: ['Excellent', 'Good', 'Above Average', 'Average', 'Below Average'],
                ja: ['æœ€é«˜', 'è‰¯', 'ä¸­ä¸Š', 'ä¸­', 'ä¸­ä¸‹'],
                zh: ['æå¥½', 'å¥½', 'ä¸­ä¸Š', 'ä¸­', 'ä¸­ä¸‹']
            };
            
            const colors = {
                ko: ['ë¹¨ê°„ìƒ‰', 'íŒŒë€ìƒ‰', 'ë…¸ë€ìƒ‰', 'ì´ˆë¡ìƒ‰', 'ë³´ë¼ìƒ‰', 'ë¶„í™ìƒ‰'],
                en: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Pink'],
                ja: ['èµ¤', 'é’', 'é»„è‰²', 'ç·‘', 'ç´«', 'ãƒ”ãƒ³ã‚¯'],
                zh: ['çº¢è‰²', 'è“è‰²', 'é»„è‰²', 'ç»¿è‰²', 'ç´«è‰²', 'ç²‰è‰²']
            };
            
            const times = {
                ko: ['ì˜¤ì „ 9-11ì‹œ', 'ì˜¤í›„ 1-3ì‹œ', 'ì˜¤í›„ 3-5ì‹œ', 'ì˜¤í›„ 7-9ì‹œ'],
                en: ['9-11 AM', '1-3 PM', '3-5 PM', '7-9 PM'],
                ja: ['åˆå‰9-11æ™‚', 'åˆå¾Œ1-3æ™‚', 'åˆå¾Œ3-5æ™‚', 'åˆå¾Œ7-9æ™‚'],
                zh: ['ä¸Šåˆ9-11ç‚¹', 'ä¸‹åˆ1-3ç‚¹', 'ä¸‹åˆ3-5ç‚¹', 'ä¸‹åˆ7-9ç‚¹']
            };
            
            const advice = {
                ko: 'ì˜¤ëŠ˜ì€ ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì´ í–‰ìš´ì„ ë¶€ë¦…ë‹ˆë‹¤. ì˜¤í›„ì— ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ê±°ì˜ˆìš”. ì‘ì€ ë³€í™”ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”!',
                en: 'A positive mindset brings luck today. Good news in the afternoon. Try small changes!',
                ja: 'ä»Šæ—¥ã¯ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå¿ƒæ§‹ãˆãŒå¹¸é‹ã‚’å‘¼ã³ã¾ã™ã€‚åˆå¾Œã«è‰¯ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚å°ã•ãªå¤‰åŒ–ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼',
                zh: 'ä»Šå¤©ç§¯æçš„å¿ƒæ€ä¼šå¸¦æ¥å¥½è¿ã€‚ä¸‹åˆä¼šæœ‰å¥½æ¶ˆæ¯ã€‚å°è¯•å°çš„æ”¹å˜ï¼'
            };
            
            return {
                nickname: nickname,
                score: score,
                stars: stars,
                rank: Math.floor(100 - score),
                love: fortunes[currentLang][Math.floor(Math.random() * fortunes[currentLang].length)],
                money: fortunes[currentLang][Math.floor(Math.random() * fortunes[currentLang].length)],
                health: fortunes[currentLang][Math.floor(Math.random() * fortunes[currentLang].length)],
                work: fortunes[currentLang][Math.floor(Math.random() * fortunes[currentLang].length)],
                color: colors[currentLang][Math.floor(Math.random() * colors[currentLang].length)],
                number: Math.floor(Math.random() * 9) + 1,
                time: times[currentLang][Math.floor(Math.random() * times[currentLang].length)],
                advice: advice[currentLang]
            };
        }
        
        // ê²°ê³¼ í‘œì‹œ
        function displayFortune(data) {
            document.getElementById('result-name').textContent = `${data.nickname}${translations[currentLang].yourFortune}`;
            document.getElementById('total-score').textContent = `${data.score}${currentLang === 'en' ? '' : currentLang === 'ja' ? 'ç‚¹' : currentLang === 'zh' ? 'åˆ†' : 'ì '}`;
            document.getElementById('star-rating').textContent = 'â­'.repeat(data.stars);
            document.getElementById('rank-percent').textContent = data.rank;
            
            document.getElementById('love-fortune').textContent = data.love;
            document.getElementById('money-fortune').textContent = data.money;
            document.getElementById('health-fortune').textContent = data.health;
            document.getElementById('work-fortune').textContent = data.work;
            
            document.getElementById('lucky-color').textContent = data.color;
            document.getElementById('lucky-number').textContent = data.number;
            document.getElementById('lucky-time').textContent = data.time;
            
            document.getElementById('advice-text').textContent = data.advice;
        }
        
        // ìš´ì„¸ ìƒì„¸ë³´ê¸° ëª¨ë‹¬
        function showFortuneDetail(type) {
            const detail = fortuneDetails[type];
            const isUnlocked = unlockedDetails.has(type);
            
            const titleText = {
                love: translations[currentLang].loveFortune,
                money: translations[currentLang].moneyFortune,
                health: translations[currentLang].healthFortune,
                work: translations[currentLang].workFortune
            };
            
            document.getElementById('modal-title').innerHTML = `${detail.icon} ${titleText[type]} ${translations[currentLang].detailTitle}`;
            
            let bodyHTML = `
                <div class="detail-section">
                    <h4>ğŸ“‹ ${translations[currentLang].summary}</h4>
                    <p>${detail.summary[currentLang]}</p>
                </div>
            `;
            
            if (isUnlocked) {
                // ì ê¸ˆ í•´ì œëœ ê²½ìš°
                bodyHTML += `
                    <div class="detail-section">
                        <h4>ğŸŒŸ ${translations[currentLang].mainFortune}</h4>
                        <p>${detail.detail[currentLang]}</p>
                    </div>
                    <div class="detail-section">
                        <h4>ğŸ’¡ ${translations[currentLang].tips}</h4>
                        <p>${detail.tips[currentLang]}</p>
                    </div>
                `;
            } else {
                // ì ê¸ˆëœ ê²½ìš°
                bodyHTML += `
                    <div style="position: relative; min-height: 300px;">
                        <div class="locked-content">
                            <div class="detail-section">
                                <h4>ğŸŒŸ ${translations[currentLang].mainFortune}</h4>
                                <p>${detail.detail[currentLang]}</p>
                            </div>
                            <div class="detail-section">
                                <h4>ğŸ’¡ ${translations[currentLang].tips}</h4>
                                <p>${detail.tips[currentLang]}</p>
                            </div>
                        </div>
                        
                        <div class="unlock-overlay">
                            <h3>${translations[currentLang].lockedTitle}</h3>
                            <p style="color: #666; margin-bottom: 20px;">
                                ${translations[currentLang].lockedDesc}
                            </p>
                            <button class="unlock-btn watch-ad" onclick="watchAdToUnlock('${type}')">
                                ${translations[currentLang].watchAd}
                            </button>
                            <button class="unlock-btn cancel" onclick="closeModal()">
                                ${translations[currentLang].cancel}
                            </button>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('modal-body').innerHTML = bodyHTML;
            document.getElementById('modal-overlay').style.display = 'block';
            document.getElementById('modal-content').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('modal-overlay').style.display = 'none';
            document.getElementById('modal-content').style.display = 'none';
        }
        
        // ê´‘ê³  ì‹œì²­ í›„ ì ê¸ˆ í•´ì œ
        function watchAdToUnlock(type) {
            closeModal();
            
            const messages = {
                ko: {
                    watching: 'ê´‘ê³ ë¥¼ ì‹œì²­í•˜ëŠ” ì¤‘...',
                    wait: 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”',
                    unlocked: 'ì ê¸ˆ í•´ì œ ì™„ë£Œ!',
                    check: 'ìƒì„¸ ìš´ì„¸ë¥¼ í™•ì¸í•˜ì„¸ìš”'
                },
                en: {
                    watching: 'Watching ad...',
                    wait: 'Please wait',
                    unlocked: 'Unlocked!',
                    check: 'Check your detailed fortune'
                },
                ja: {
                    watching: 'åºƒå‘Šã‚’è¦–è´ä¸­...',
                    wait: 'ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„',
                    unlocked: 'ãƒ­ãƒƒã‚¯è§£é™¤å®Œäº†ï¼',
                    check: 'è©³ã—ã„é‹å‹¢ã‚’ç¢ºèªã—ã¦ãã ã•ã„'
                },
                zh: {
                    watching: 'æ­£åœ¨è§‚çœ‹å¹¿å‘Š...',
                    wait: 'è¯·ç¨å€™',
                    unlocked: 'è§£é”å®Œæˆï¼',
                    check: 'æŸ¥çœ‹è¯¦ç»†è¿åŠ¿'
                }
            };
            
            const msg = messages[currentLang];
            
            // ê´‘ê³  ì‹œì²­ ì‹œë®¬ë ˆì´ì…˜
            const loadingDiv = document.createElement('div');
            loadingDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 40px;
                border-radius: 20px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                z-index: 2000;
                text-align: center;
            `;
            loadingDiv.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“º</div>
                <p style="color: #333; font-size: 18px; margin-bottom: 15px;">${msg.watching}</p>
                <p style="color: #999; font-size: 14px;">${msg.wait}</p>
            `;
            document.body.appendChild(loadingDiv);
            
            // 3ì´ˆ í›„ ê´‘ê³  ì™„ë£Œ
            setTimeout(() => {
                document.body.removeChild(loadingDiv);
                unlockedDetails.add(type);
                
                // ì„±ê³µ ë©”ì‹œì§€
                const successDiv = document.createElement('div');
                successDiv.style.cssText = loadingDiv.style.cssText;
                successDiv.innerHTML = `
                    <div style="font-size: 48px; margin-bottom: 20px;">ğŸ‰</div>
                    <p style="color: #333; font-size: 18px; margin-bottom: 15px;">${msg.unlocked}</p>
                    <p style="color: #999; font-size: 14px;">${msg.check}</p>
                `;
                document.body.appendChild(successDiv);
                
                setTimeout(() => {
                    document.body.removeChild(successDiv);
                    showFortuneDetail(type);
                }, 1500);
            }, 3000);
        }
        
        // ê³µìœ  ê¸°ëŠ¥
        function shareKakao() {
            alert('KakaoTalk sharing requires Kakao SDK integration.');
        }
        
        function shareTwitter() {
            const messages = {
                ko: `ğŸ° ì˜¤ëŠ˜ì˜ ìš´ì„¸ ${fortuneData.score}ì ! (ìƒìœ„ ${fortuneData.rank}%)\n\në‚˜ë„ í™•ì¸í•˜ê¸° ğŸ‘‰`,
                en: `ğŸ° Today's Fortune ${fortuneData.score} points! (Top ${fortuneData.rank}%)\n\nCheck yours ğŸ‘‰`,
                ja: `ğŸ° ä»Šæ—¥ã®é‹å‹¢ ${fortuneData.score}ç‚¹ï¼ï¼ˆä¸Šä½${fortuneData.rank}%ï¼‰\n\nã‚ãªãŸã‚‚ãƒã‚§ãƒƒã‚¯ ğŸ‘‰`,
                zh: `ğŸ° ä»Šæ—¥è¿åŠ¿ ${fortuneData.score}åˆ†ï¼ï¼ˆå‰${fortuneData.rank}%ï¼‰\n\næŸ¥çœ‹ä½ çš„ ğŸ‘‰`
            };
            const text = messages[currentLang];
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }
        
        function shareFacebook() {
            const url = window.location.href;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }
        
        function copyLink() {
            const messages = {
                ko: 'ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰',
                en: 'Link copied! ğŸ‰',
                ja: 'ãƒªãƒ³ã‚¯ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼ğŸ‰',
                zh: 'é“¾æ¥å·²å¤åˆ¶ï¼ğŸ‰'
            };
            
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert(messages[currentLang]);
            }).catch(() => {
                const input = document.createElement('input');
                input.value = url;
                document.body.appendChild(input);
                input.select();
                document.execCommand('copy');
                document.body.removeChild(input);
                alert(messages[currentLang]);
            });
        }
    </script>
</body>
</html>
